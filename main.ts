namespace SpriteKind {
    export const Treeeeeee = SpriteKind.create()
    export const NPC = SpriteKind.create()
}
function setMap () {
    tiles.setCurrentTilemap(tileUtil.createSmallMap(tilemap`CityMap`))
    for (let value of tiles.getTilesByType(assets.tile`treeSpawn`)) {
        if (0 <= SpriteLimit) {
            mySprite2 = sprites.create(assets.image`treee`, SpriteKind.Treeeeeee)
            SpriteLimit += -1
            tiles.placeOnTile(mySprite2, value)
        }
    }
    for (let value2 of tiles.getTilesByType(assets.tile`stone`)) {
        if (Math.percentChance(0.0001)) {
            tiles.setTileAt(value2, assets.tile`stoneMoneyDrop`)
        }
    }
    for (let index = 0; index <= 4; index++) {
    	
    }
}
function setPlayer () {
    mySprite = sprites.create(assets.image`PersonA`, SpriteKind.Player)
    controller.moveSprite(mySprite, 75, 75)
    scene.cameraFollowSprite(mySprite)
    tiles.placeOnRandomTile(mySprite, assets.tile`stone`)
    sprites.setDataImageValue(mySprite, "ImgA", assets.image`PersonA`)
    sprites.setDataImageValue(mySprite, "ImgB", assets.image`PlayerB`)
    sprites.setDataImageValue(mySprite, "ImgAH", assets.image`PersonAhold`)
    sprites.setDataImageValue(mySprite, "ImgBH", assets.image`PersonBhold`)
    sprites.readDataImage(mySprite, "ImgA").replace(8, 13)
    sprites.readDataImage(mySprite, "ImgA").replace(5, 2)
    sprites.readDataImage(mySprite, "ImgB").replace(8, 13)
    sprites.readDataImage(mySprite, "ImgB").replace(5, 2)
    sprites.readDataImage(mySprite, "ImgAH").replace(8, 13)
    sprites.readDataImage(mySprite, "ImgAH").replace(5, 2)
    sprites.readDataImage(mySprite, "ImgBH").replace(8, 13)
    sprites.readDataImage(mySprite, "ImgBH").replace(5, 2)
}
function personOddTile (X: number, Y: number) {
    if ((X + Y) % 2 == 0) {
        return true
    } else {
        return false
    }
}
function SetGameSettings () {
    BeffyMode = game.ask("Is your system not trash?")
    if (BeffyMode) {
        SpriteLimit = 75
        blockSettings.writeNumber("BEFFY", 0)
    } else {
        SpriteLimit = 50
        if (blockSettings.exists("BEFFY")) {
            blockSettings.remove("BEFFY")
        }
    }
    if (!(game.ask("Is the settings good?"))) {
        game.splash("Ill say it again.")
        SetGameSettings()
    }
}
function Init () {
    TelephoneNames = ["Gun shop", "Red real estate house", "Blue real estate house"]
    HouseNames = [
    "Bland Modern house (NW)",
    "Red Small house (N)",
    "Blue Meh house (N)",
    "Blue Small house (NE)"
    ]
    HouseCosts = [
    0,
    0,
    0,
    9999
    ]
    MenuUp = true
    TitleScreen = true
    if (blockSettings.exists("BEFFY")) {
        SpriteLimit = 75
    } else {
        SpriteLimit = 50
    }
}
let TitleScreen = false
let MenuUp = false
let HouseCosts: number[] = []
let HouseNames: string[] = []
let TelephoneNames: string[] = []
let BeffyMode = false
let mySprite: Sprite = null
let mySprite2: Sprite = null
let SpriteLimit = 0
game.setDialogCursor(assets.image`PressA`)
Init()
if (blockSettings.list().length == 0) {
    game.splash("Ominouswolf presen-")
    game.setDialogTextColor(1)
    game.setDialogFrame(assets.image`Blank`)
    game.setDialogCursor(assets.image`Blank`)
    scene.setBackgroundImage(assets.image`MarkSTOP`)
    game.showLongText("HOLD ON WAIT A MINUTE!!!", DialogLayout.Bottom)
    scene.setBackgroundImage(assets.image`MarkWHAWHA`)
    pause(50)
    if (game.ask("This is your first time", "booting up eh?")) {
        scene.setBackgroundImage(assets.image`Mark`)
        game.showLongText("I knew it.", DialogLayout.Bottom)
    } else {
        scene.setBackgroundImage(assets.image`MarkSTOP`)
        game.showLongText("Well I say so! Anyways,", DialogLayout.Bottom)
    }
    scene.setBackgroundImage(assets.image`MarkWHAWHA`)
    game.showLongText("We need some data before the game ok? Take your time.", DialogLayout.Bottom)
    scene.setBackgroundImage(assets.image`MarkRED`)
    pause(50)
    SetGameSettings()
    scene.setBackgroundImage(assets.image`Mark`)
    game.showLongText("Alright. I got all the info I need. Till I see you again kid!", DialogLayout.Bottom)
    scene.setBackgroundImage(assets.image`MarkSTOP`)
    game.showLongText("OH! I havent told you my name yet! Just call me mark. (Cant let the police know my real name)", DialogLayout.Bottom)
    blockSettings.writeNumber("BOOT", 0)
    game.reset()
}
game.splash("Ominouswolf presents...")
scene.setBackgroundImage(assets.image`TitleEnlarge`)
game.setDialogCursor(assets.image`PressA`)
game.setDialogFrame(assets.image`Blank`)
game.setDialogTextColor(1)
game.showLongText("v1 By Ominouswolf", DialogLayout.Bottom)
game.setDialogTextColor(15)
game.setDialogFrame(assets.image`TextBox`)
let myMenu = miniMenu.createMenu(
miniMenu.createMenuItem("PLAY", assets.image`playIcon`),
miniMenu.createMenuItem("INSTRUCTIONS", assets.image`QUESTIONN`),
miniMenu.createMenuItem("GAME SETTINGS", assets.image`gameset`),
miniMenu.createMenuItem("SYST SETTINGS", assets.image`consset`),
miniMenu.createMenuItem("CLEAR GAME", assets.image`DestroyDataaaaa`)
)
myMenu.setPosition(80, 90)
// (Funny concept for homes)
// 
// Red & Blue: 3/4 added
// 
// Red: 1/2 added
// 
// Blue: 1/4 added
// 
// No color: Normal cost
game.onUpdate(function () {
    if (MenuUp) {
        if (TitleScreen) {
            myMenu.onButtonPressed(controller.A, function (selection, selectedIndex) {
                if (selectedIndex == 0) {
                    setMap()
                    setPlayer()
                    myMenu.close()
                    TitleScreen = false
                    MenuUp = false
                } else if (selectedIndex == 1) {
                    game.showLongText("Move with your favorite way to move. Press [B] to switch between tools. Press [A] to use the tool. Press [MENU] to open Invintory/Pause menu. Goal? Psshh, there's no goal! Do what you want here! (I do hear that you can own the entire block)- The NOT wolf", DialogLayout.Full)
                } else if (selectedIndex == 2) {
                    scene.setBackgroundImage(img`
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        ................................................................................................................................................................
                        `)
                    game.setDialogTextColor(1)
                    game.setDialogFrame(assets.image`Blank`)
                    game.setDialogCursor(assets.image`Blank`)
                    myMenu.close()
                    pause(2000)
                    scene.setBackgroundImage(assets.image`Mark`)
                    game.showLongText("Hi again kid.", DialogLayout.Bottom)
                    scene.setBackgroundImage(assets.image`MarkQestionnn`)
                    game.showLongText("I'm gonna ask you a couple of questions. K?", DialogLayout.Bottom)
                    scene.setBackgroundImage(assets.image`Mark`)
                    game.showLongText("First of all...", DialogLayout.Bottom)
                    scene.setBackgroundImage(assets.image`MarkRED`)
                    if (game.ask("Do you want to continue?")) {
                        SetGameSettings()
                    }
                    scene.setBackgroundImage(assets.image`Mark`)
                    game.showLongText("Right that's all the questions. I'll see you later.", DialogLayout.Bottom)
                    scene.setBackgroundImage(assets.image`TitleEnlarge`)
                    myMenu = miniMenu.createMenu(
                    miniMenu.createMenuItem("PLAY", assets.image`playIcon`),
                    miniMenu.createMenuItem("INSTRUCTIONS", assets.image`QUESTIONN`),
                    miniMenu.createMenuItem("GAME SETTINGS", assets.image`gameset`),
                    miniMenu.createMenuItem("SYST SETTINGS", assets.image`consset`),
                    miniMenu.createMenuItem("CLEAR GAME", assets.image`DestroyDataaaaa`)
                    )
                    myMenu.setPosition(80, 90)
                } else if (selectedIndex == 3) {
                    scene.systemMenu.showSystemMenu()
                } else if (selectedIndex == 4) {
                    if (game.ask("WHOA WHOA WHOA", "Are you sure?")) {
                        if (game.ask("Like are you really sure?", "It would be gone forever!")) {
                            if (game.ask("Are you really really sure?", "Last chance to back away!")) {
                                game.splash("Welp that's a shame.")
                                game.splash("Ill get on with it")
                                blockSettings.clear()
                                game.splash("There ive deleted the data")
                                while (true) {
                                    game.splash("Now restart the game please.")
                                }
                            }
                        }
                    }
                }
            })
        } else {
        	
        }
    } else {
        if (personOddTile(mySprite.tilemapLocation().column, mySprite.tilemapLocation().row)) {
            if (controller.A.isPressed()) {
                mySprite.setImage(sprites.readDataImage(mySprite, "ImgBH"))
            } else {
                mySprite.setImage(sprites.readDataImage(mySprite, "ImgB"))
            }
        } else {
            if (controller.A.isPressed()) {
                mySprite.setImage(sprites.readDataImage(mySprite, "ImgAH"))
            } else {
                mySprite.setImage(sprites.readDataImage(mySprite, "ImgA"))
            }
        }
        for (let value3 of sprites.allOfKind(SpriteKind.NPC)) {
        	
        }
    }
})
